!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var service={};service.fetchGrams=function(latlng){var xhttp=new window.XMLHttpRequest;xhttp.open("GET","./grams?lat="+latlng.lat+"&lng="+latlng.lng,!0),xhttp.send(),xhttp.onreadystatechange=function(){if(4==xhttp.readyState&&200==xhttp.status){var mediaStream=JSON.parse(xhttp.responseText);service.onmediasready&&service.onmediasready(mediaStream)}}},module.exports=service},{}],2:[function(require,module,exports){function makeMapBox(){var $map=document.createElement("div");return $map.id="map",$app.appendChild($map),mapService.buildMap(),$map}function run(){gramService.onmediasready=function(medias){medias.forEach(function(media){media.location&&(console.log(media),mapService.addMarker(media.location.latitude,media.location.longitude,media.images.thumbnail.url))})},mapService.clickHandler=gramService.fetchGrams;makeMapBox()}var $app,mapService=require("./map"),gramService=require("./gram"),mycph=window.mycph||{};mycph.init=function($container){$app=$container,$app.innerHTML=""},mycph.run=function(){if("undefined"==typeof $app)throw new Error("the app must provide a DOM container");run()},window.mycph=mycph},{"./gram":1,"./map":3}],3:[function(require,module,exports){(function(global){var L="undefined"!=typeof window?window.L:"undefined"!=typeof global?global.L:null;console.log(L);var map,clickHandler,service={};service.addMarker=function(lat,lng,thumbnail){var icon=L.icon({iconUrl:thumbnail,iconSize:[70,70],popupAnchor:[0,-15]}),customPopup="<br/><img src='"+thumbnail+"'  width='140px' length='140px'/>",customOptions={maxWidth:"500",className:"custom"};console.log(icon),L.marker([lat,lng],{icon:icon}).bindPopup(customPopup,customOptions).addTo(map)},service.buildMap=function(){map=L.map("map").setView([55.676023,12.569031],13),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',maxZoom:30,id:"ddamba.ofm04n7i",accessToken:"pk.eyJ1IjoiZGRhbWJhIiwiYSI6Ik9vX1VPdmcifQ.nEbSOXJ-DWVGhiEY771xvg"}).addTo(map),service.clickHandler&&map.on("click",function(e){return service.clickHandler(e.latlng)})},service.init=function(options){options.clickHandler&&(clickHandler=options.clickHandler)},module.exports=service}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2]);
//# sourceMappingURL=mycph.js.map
